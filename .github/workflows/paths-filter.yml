name: paths-filter

on:
  workflow_call:
    outputs:
      should_build:
        description: 'Whether to build or not'
        value: ${{ jobs.paths-filter.outputs.should_build }}
      should_test:
        description: 'Whether to test or not'
        value: ${{ jobs.paths-filter.outputs.should_test }}

jobs:
  paths-filter:
    name: 'Check Paths'
    runs-on: ubuntu-latest
    permissions:
      pull-requests: read
    outputs:
      should_build: ${{ steps.build_check.outputs.should-build-or-test }}
      should_test: ${{ steps.build_check.outputs.should-build-or-test }}
    steps:
      - id: build_check
        if: github.event_name == 'pull_request'
        uses: dorny/paths-filter@v2
        with:
          filters: |
            should-build-or-test:
              - '.github/**'
              - 'Brewfile.*'
              - 'Brewfile'
              - 'Commands/**'
              - 'dist/**'
              - 'GHAScripts/**'
              - 'GHAShortcuts/**'
              - 'Mintfile'
              - 'project.yml'
              - 'ReusableWorkflows/**'
              - 'Targets/**'
              - 'ThirdParties/**'
              - 'Xcodegen/**'
              - 'Xcodeproj/**'
